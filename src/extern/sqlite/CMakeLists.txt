PROJECT(sqlite)

ADD_LIBRARY(sqlite STATIC sqlite3.c sqlite3.h sqlite3ext.h)
TARGET_INCLUDE_DIRECTORIES(sqlite PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})

FIND_PACKAGE(Threads)
TARGET_LINK_LIBRARIES(sqlite Threads::Threads ${CMAKE_DL_LIBS})
TARGET_COMPILE_DEFINITIONS(sqlite PUBLIC SQLITE_ENABLE_STAT4=1)

IF(CMAKE_SYSTEM_PROCESSOR STREQUAL "x86_64")
  SET_TARGET_PROPERTIES(sqlite PROPERTIES COMPILE_FLAGS "-fPIC")
ENDIF()
